# ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Parent-child education

<a href="https://react.dev/" target="_blank"><img src="https://img.shields.io/badge/React-18+-61DAFB?logo=react&logoColor=61DAFB" alt="React"></a>
<a href="https://vitejs.dev/" target="_blank"><img src="https://img.shields.io/badge/Vite-4.0+-646CFF?logo=vite&logoColor=646CFF" alt="Vite"></a>
<a href="https://koajs.com/" target="_blank"><img src="https://img.shields.io/badge/Koa-2.0+-33333D?logo=koa&logoColor=33333D" alt="Koa"></a>
<a href="https://www.mysql.com/" target="_blank"><img src="https://img.shields.io/badge/MySQL-5.7+-4479A1?logo=mysql&logoColor=4479A1" alt="MySQL"></a>
<a href="https://reactrouter.com/" target="_blank"><img src="https://img.shields.io/badge/React_Router-6.0+-CA4245?logo=reactrouter&logoColor=CA4245" alt="React Router"></a>
<a href="https://mobile.ant.design/" target="_blank"><img src="https://img.shields.io/badge/Ant_Design_Mobile-5.0+-0170FE?logo=antdesign&logoColor=0170FE" alt="Ant Design Mobile"></a>
<a href="https://axios-http.com/" target="_blank"><img src="https://img.shields.io/badge/Axios-0.21+-5A29E4?logo=axios&logoColor=5A29E4" alt="Axios"></a>
<a href="https://lesscss.org/" target="_blank"><img src="https://img.shields.io/badge/Less-3.0+-1D365D?logo=less&logoColor=1D365D" alt="Less"></a>
<a href="https://jwt.io/" target="_blank"><img src="https://img.shields.io/badge/JWT-8.0+-000000?logo=jsonwebtokens&logoColor=000000" alt="JWT"></a>

**æœ¬é¡¹ç›®ä½¿ç”¨ï¼š**

<a href="https://react.dev/" target="_blank"><img src="https://img.shields.io/badge/React-19.2.0-61DAFB?logo=react&logoColor=61DAFB" alt="React"></a>
<a href="https://vitejs.dev/" target="_blank"><img src="https://img.shields.io/badge/Vite-7.3.1-646CFF?logo=vite&logoColor=646CFF" alt="Vite"></a>
<a href="https://koajs.com/" target="_blank"><img src="https://img.shields.io/badge/Koa-3.1.1-33333D?logo=koa&logoColor=33333D" alt="Koa"></a>
<a href="https://www.mysql.com/" target="_blank"><img src="https://img.shields.io/badge/MySQL-8.0-4479A1?logo=mysql&logoColor=4479A1" alt="MySQL"></a>
<a href="https://reactrouter.com/" target="_blank"><img src="https://img.shields.io/badge/React_Router-7.13.0-CA4245?logo=reactrouter&logoColor=CA4245" alt="React Router"></a>
<a href="https://mobile.ant.design/" target="_blank"><img src="https://img.shields.io/badge/Ant_Design_Mobile-5.42.3-0170FE?logo=antdesign&logoColor=0170FE" alt="Ant Design Mobile"></a>
<a href="https://axios-http.com/" target="_blank"><img src="https://img.shields.io/badge/Axios-1.13.5-5A29E4?logo=axios&logoColor=5A29E4" alt="Axios"></a>
<a href="https://lesscss.org/" target="_blank"><img src="https://img.shields.io/badge/Less-4.5.1-1D365D?logo=less&logoColor=1D365D" alt="Less"></a>
<a href="https://jwt.io/" target="_blank"><img src="https://img.shields.io/badge/JWT-9.0.3-000000?logo=jsonwebtokens&logoColor=000000" alt="JWT"></a>

> **ä¸€ä¸ªä¸“æ³¨äº 0-12 å²äº²å­æ•™è‚²çš„æ™ºèƒ½é™ªä¼´å¹³å°**ï¼Œé›†æˆ AI è¯†ç‰©ã€æ™ºèƒ½å¯¹è¯ã€å­¦ä¹ å¯è’™ç­‰åŠŸèƒ½ï¼Œè®©ç§‘æŠ€æˆä¸ºäº²å­æˆé•¿çš„å¾—åŠ›åŠ©æ‰‹ã€‚å®¶é•¿å¯ä»¥åœ¨å¹³å°ä¸Šæ³¨å†Œè´¦å·ï¼Œä¸ºå­©å­åˆ›å»ºä¸“å±çš„å­¦ä¹ ç¯å¢ƒã€‚

## âœ¨ é¡¹ç›®äº®ç‚¹

### ğŸ¯ æ™ºèƒ½æ•™è‚²åœºæ™¯
- **AI æ‹ç…§è¯†ç‰©**
  - æ”¯æŒç›¸å†Œä¸Šä¼ å’Œå®æ—¶æ‹ç…§ä¸¤ç§æ–¹å¼
  - å›¾ç‰‡è‡ªåŠ¨è½¬æ¢ä¸º Base64 æ ¼å¼ä¼ è¾“
  - è°ƒç”¨ Coze å·¥ä½œæµå®ç°å›¾åƒè¯†åˆ«
  - AI æ™ºèƒ½è®²è§£ç‰©å“ç”¨é€”ã€å®‰å…¨æç¤ºï¼Œæ”¯æŒè¯­éŸ³æœ—è¯»
  
- **æ™ºèƒ½å¯¹è¯åŠ©æ‰‹**
  - é›†æˆ DeepSeek å¤§è¯­è¨€æ¨¡å‹
  - æ”¯æŒå¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡è®°å¿†
  - ä¸“ä¸ºäº²å­æ•™è‚²åœºæ™¯ä¼˜åŒ–çš„ç³»ç»Ÿæç¤ºè¯
  - å®æ—¶æµå¼å“åº”ï¼Œæ‰“å­—æœºæ•ˆæœå±•ç¤º
  
- **å¤šç»´åº¦å­¦ä¹ æ¨¡å—**
  - å¤è¯—è¯å¤©åœ°ï¼šæ¯æ—¥ä¸€è¯—ï¼Œå›¾æ–‡+æœ—è¯»
  - æ‹ç…§å­¦å•è¯ï¼šçœ‹å›¾è®°å•è¯ï¼Œè¯­éŸ³è·Ÿè¯»
  - ç§‘å­¦å°å®éªŒï¼šå®‰å…¨ææ–™ï¼ŒåŠ¨æ‰‹åšå®éªŒ
  - äº²å­æˆé•¿ä»»åŠ¡ï¼šæ¯æ—¥æ‰“å¡ï¼Œä¹ æƒ¯å…»æˆ

### ğŸ“± ç§»åŠ¨ç«¯ä¼˜å…ˆ
- **rem å“åº”å¼å¸ƒå±€**
  - åŠ¨æ€è®¡ç®—æ ¹å…ƒç´ å­—ä½“å¤§å°ï¼Œå®ç°å®Œç¾é€‚é…
  - ç›‘å¬çª—å£ resize äº‹ä»¶ï¼Œå®æ—¶å“åº”å±å¹•å˜åŒ–
  - 1rem = å±å¹•å®½åº¦/10ï¼Œè®¾è®¡ç¨¿è¿˜åŸåº¦é«˜
  
- **ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿ**
  - å†…ç½® defaultï¼ˆæ©™è‰²ä¸»é¢˜ï¼‰å’Œ greenï¼ˆç»¿è‰²ä¸»é¢˜ï¼‰
  - ä¸»é¢˜é…ç½®åŒ…å«ä¸»è‰²ã€æ¬¡è‰²ã€åŠ è½½è‰²ã€æ¸å˜è‰²ç­‰
  - ç»„ä»¶çº§ä¸»é¢˜æ³¨å…¥ï¼Œçµæ´»æ‰©å±•
  
- **æµç•…äº¤äº’ä½“éªŒ**
  - ç²¾å¿ƒè®¾è®¡çš„ CSS åŠ¨ç”»ä¸è¿‡æ¸¡æ•ˆæœ
  - Ant Design Mobile ç»„ä»¶åº“æä¾›åŸç”Ÿèˆ¬ä½“éªŒ
  - æ»‘åŠ¨åˆ‡æ¢ã€ç‚¹å‡»åé¦ˆç­‰ç»†èŠ‚æ‰“ç£¨

### ğŸ” å®‰å…¨å¯é 
- **JWT èº«ä»½è®¤è¯**
  - ç™»å½•æˆåŠŸåç”Ÿæˆ 7 å¤©æœ‰æ•ˆæœŸçš„ Token
  - å‰ç«¯è¯·æ±‚æ‹¦æˆªå™¨è‡ªåŠ¨æºå¸¦ Token
  - åç«¯ä¸­é—´ä»¶éªŒè¯ Token åˆæ³•æ€§
  - Token è¿‡æœŸè‡ªåŠ¨è·³è½¬ç™»å½•é¡µ
  
- **å¯†ç åŠ å¯†å­˜å‚¨**
  - ä½¿ç”¨ bcrypt è¿›è¡Œå¯†ç å“ˆå¸Œ
  - saltRounds = 10ï¼Œå®‰å…¨æ€§ä¸æ€§èƒ½å¹³è¡¡
  - æ•°æ®åº“åªå­˜å‚¨åŠ å¯†åçš„å¯†ç å“ˆå¸Œ
  
- **éªŒè¯ç é˜²æŠ¤**
  - SVG å›¾å½¢éªŒè¯ç ï¼Œé˜²æ­¢æš´åŠ›ç ´è§£
  - éªŒè¯ç  ID + éªŒè¯ç å†…å®¹åŒé‡æ ¡éªŒ
  - æ”¯æŒåˆ·æ–°éªŒè¯ç 

### ğŸ¤– AI èƒ½åŠ›é›†æˆ
- **Coze å·¥ä½œæµ**
  - å›¾åƒè¯†åˆ«å·¥ä½œæµï¼Œæ”¯æŒç‰©ä½“è¯†åˆ«
  - è¿”å›ç»“æ„åŒ–æ•°æ®ï¼šç‰©å“åç§°ã€æè¿°ã€å®‰å…¨æç¤º
  - æ”¯æŒè¯­éŸ³åˆæˆï¼Œè‡ªåŠ¨æœ—è¯»è¯†åˆ«ç»“æœ
  
- **DeepSeek å¤§æ¨¡å‹**
  - å…¼å®¹ OpenAI API æ ¼å¼ï¼Œæ¥å…¥æˆæœ¬ä½
  - ä¸­æ–‡ç†è§£èƒ½åŠ›å¼ºï¼Œé€‚åˆæ•™è‚²åœºæ™¯
  - æ”¯æŒç³»ç»Ÿæç¤ºè¯å®šåˆ¶è§’è‰²
  
- **è¯­éŸ³äº¤äº’èƒ½åŠ›**
  - æ”¯æŒè¯­éŸ³è¾“å…¥ï¼ˆæµè§ˆå™¨ Web Speech APIï¼‰
  - AI å›å¤æ”¯æŒè¯­éŸ³æœ—è¯»
  - é€‚åˆä½é¾„å„¿ç«¥ä½¿ç”¨åœºæ™¯

### ğŸ—ï¸ æ¶æ„è®¾è®¡
- **å‰åç«¯åˆ†ç¦»**
  - å‰ç«¯ React + Viteï¼Œåç«¯ Koa + MySQL
  - RESTful API è®¾è®¡ï¼Œæ¥å£è§„èŒƒæ¸…æ™°
  - æ”¯æŒè·¨åŸŸè¯·æ±‚ï¼ˆCORSï¼‰
  
- **MVC åˆ†å±‚æ¶æ„**
  - Routes è·¯ç”±å±‚ï¼šå®šä¹‰æ¥å£åœ°å€
  - Controllers æ§åˆ¶å±‚ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘
  - Models æ¨¡å‹å±‚ï¼šæ•°æ®åº“æ“ä½œå°è£…
  
- **ç»Ÿä¸€é”™è¯¯å¤„ç†**
  - Axios å“åº”æ‹¦æˆªå™¨ç»Ÿä¸€æ•è·é”™è¯¯
  - Toast æç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
  - HTTP çŠ¶æ€ç åŒºåˆ†é”™è¯¯ç±»å‹

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½æ¨¡å— | æè¿° |
|---------|------|
| ğŸ” ç”¨æˆ·ç³»ç»Ÿ | ç™»å½•/æ³¨å†Œã€JWT è®¤è¯ã€è´¦æˆ·ç®¡ç† |
| ğŸ“¸ AI è¯†ç‰© | æ‹ç…§è¯†åˆ«ç‰©å“ï¼ŒAI æ™ºèƒ½è®²è§£ |
| ğŸ’¬ æ™ºèƒ½å¯¹è¯ | DeepSeek é©±åŠ¨çš„ AI å¯¹è¯åŠ©æ‰‹ |
| ğŸ“š å­¦ä¹ å¯è’™ | å¤è¯—è¯ã€è‹±è¯­å•è¯ã€ç§‘å­¦å®éªŒ |
| ğŸ“ æˆé•¿ä»»åŠ¡ | äº²å­æ‰“å¡ï¼Œä¹ æƒ¯å…»æˆ |
| ğŸ¨ ä¸»é¢˜åˆ‡æ¢ | å¤šç§é…è‰²ä¸»é¢˜ï¼Œä¸ªæ€§åŒ–ä½“éªŒ |

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯ (Frontend)

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| React | 19.2.0 | ç°ä»£ UI æ¡†æ¶ï¼Œå‡½æ•°å¼ç»„ä»¶ + Hooks |
| React Router | 7.13.0 | å‰ç«¯è·¯ç”±ç®¡ç† |
| Vite | 7.3.1 | æé€Ÿæ„å»ºä¸çƒ­é‡è½½ |
| Ant Design Mobile | 5.42.3 | ç§»åŠ¨ç«¯ UI ç»„ä»¶åº“ |
| Axios | 1.13.5 | HTTP è¯·æ±‚åº“ |
| Less | 4.5.1 | CSS é¢„å¤„ç†å™¨ |

### åç«¯ (Backend)

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Koa | 3.1.1 | Node.js Web æ¡†æ¶ |
| Koa Router | 14.0.0 | è·¯ç”±ç®¡ç† |
| MySQL2 | 3.17.2 | MySQL æ•°æ®åº“è¿æ¥ |
| JWT | 9.0.3 | èº«ä»½è®¤è¯ |
| Bcrypt | 6.0.0 | å¯†ç åŠ å¯† |
| SVG Captcha | 1.4.0 | éªŒè¯ç ç”Ÿæˆ |
| OpenAI | 6.25.0 | AI èƒ½åŠ›æ¥å…¥ |

## ğŸ“ é¡¹ç›®ç»“æ„

```plaintext
Parent-child-education/
â”œâ”€â”€ Frontend/                    # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ Components/          # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ImageCaptureAndProcess/  # å›¾åƒæ‹æ‘„ä¸å¤„ç†ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ RecognitionResult/       # è¯†åˆ«ç»“æœå±•ç¤ºç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ HomeCard.jsx             # é¦–é¡µå¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Pages/                  # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.jsx           # ç™»å½•é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Register.jsx        # æ³¨å†Œé¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.jsx            # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ AIPage.jsx          # AI åŠŸèƒ½é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ AIChat.jsx          # AI å¯¹è¯é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ Recognition.jsx     # æ‹ç…§è¯†åˆ«é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ MinePage.jsx        # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â”‚   â””â”€â”€ AccountSetting.jsx  # è´¦æˆ·è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ Http/                   # HTTP è¯·æ±‚å°è£…
â”‚   â”‚   â”œâ”€â”€ Styles/                 # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ Utils/                  # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ App.jsx                 # åº”ç”¨å…¥å£
â”‚   â”‚   â””â”€â”€ main.jsx                # React æŒ‚è½½ç‚¹
â”‚   â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”‚
â”œâ”€â”€ Backend/                     # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ Config/              # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ database.js      # æ•°æ®åº“é…ç½®
â”‚   â”‚   â”œâ”€â”€ Controllers/         # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ authController.js      # è®¤è¯æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ cozeController.js      # Coze AI æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â””â”€â”€ deepseekController.js  # DeepSeek æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ Models/              # æ•°æ®æ¨¡å‹å±‚
â”‚   â”‚   â”‚   â””â”€â”€ userModel.js     # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Routes/              # è·¯ç”±å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ authRoutes.js    # è®¤è¯è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ cozeAPI.js       # Coze API è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ deepseekAPI.js   # DeepSeek API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ Utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ captcha.js       # éªŒè¯ç å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ jwt.js           # JWT å·¥å…·
â”‚   â”‚   â””â”€â”€ index.js             # æœåŠ¡å…¥å£
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ README.md
```

## ğŸƒ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- MySQL >= 8.0
- npm >= 9.0.0

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/harvest0623/Parent-child-education.git
cd Parent-child-education
```

### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£…å‰ç«¯ä¾èµ–
cd Frontend
npm install

# å®‰è£…åç«¯ä¾èµ–
cd ../Backend
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

åœ¨ `Backend` ç›®å½•ä¸‹åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=parent_child_education

# Coze API å¯†é’¥
VITE_COZE_IMAGE_TO_TEXT_AND_VOICE=your_coze_api_key

# DeepSeek API å¯†é’¥
DEEPSEEK_API_KEY=your_deepseek_api_key
```

### 4. åˆå§‹åŒ–æ•°æ®åº“

```sql
CREATE DATABASE parent_child_education CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 5. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨åç«¯æœåŠ¡ (åœ¨ Backend ç›®å½•ä¸‹)
npm run dev

# å¯åŠ¨å‰ç«¯æœåŠ¡ (åœ¨ Frontend ç›®å½•ä¸‹ï¼Œæ–°å¼€ç»ˆç«¯)
npm run dev
```

### 6. è®¿é—®åº”ç”¨

é¢„è§ˆåœ°å€ï¼š[äº²å­æ•™è‚²APP](http://47.118.25.23:8083/home)

## ğŸ” æ ¸å¿ƒå®ç°åŸç†

### 1. ç§»åŠ¨ç«¯ rem é€‚é…æ–¹æ¡ˆ

é‡‡ç”¨ rem å•ä½å®ç°ç§»åŠ¨ç«¯å¤šå±å¹•é€‚é…ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯å°†è®¾è®¡ç¨¿æŒ‰æ¯”ä¾‹ç¼©æ”¾ï¼š

```javascript
// Utils/rem.js - ç«‹å³æ‰§è¡Œå‡½æ•°
(function(win, doc) {
    const docEl = doc.documentElement;  // è·å– html æ ¹å…ƒç´ 
    const width = docEl.clientWidth;    // è·å–è§†å£å®½åº¦

    // è®¾ç½® html å­—ä½“å¤§å° = è§†å£å®½åº¦ / 10
    // è®¾è®¡ç¨¿ 375px æ—¶ï¼Œ1rem = 37.5px
    docEl.style.fontSize = width / 10 + 'px';  

    // ç›‘å¬çª—å£å˜åŒ–ï¼ŒåŠ¨æ€è°ƒæ•´
    win.addEventListener('resize', () => {
        const newWidth = docEl.clientWidth;
        docEl.style.fontSize = newWidth / 10 + 'px';
    });

    // è®¾ç½® body åŸºç¡€å­—ä½“å¤§å°
    doc.body.style.fontSize = '16px';
})(window, document);
```

**ä½¿ç”¨æ–¹å¼**ï¼šCSS ä¸­ä½¿ç”¨ rem å•ä½ï¼Œå¦‚ `width: 2rem` åœ¨ 375px å±å¹•ä¸Šç­‰äº 75pxã€‚

---

### 2. JWT èº«ä»½è®¤è¯æµç¨‹

å®Œæ•´çš„èº«ä»½è®¤è¯æµç¨‹åŒ…å« Token ç”Ÿæˆã€æºå¸¦ã€éªŒè¯ä¸‰ä¸ªç¯èŠ‚ï¼š

**åç«¯ - ç™»å½•æˆåŠŸç”Ÿæˆ Token**

```javascript
// Controllers/authController.js
const jwt = require('jsonwebtoken');

async function login(ctx) {
    const { phone, password } = ctx.request.body;
    
    // éªŒè¯ç”¨æˆ·å­˜åœ¨
    const user = await findUserByPhone(phone);
    if (!user) {
        ctx.status = 400;
        ctx.body = { message: 'è´¦å·ä¸å­˜åœ¨' };
        return;
    }

    // éªŒè¯å¯†ç 
    const ok = await bcrypt.compare(password, user.password_hash);
    if (!ok) {
        ctx.status = 400;
        ctx.body = { message: 'å¯†ç é”™è¯¯' };
        return;
    }

    // ç”Ÿæˆ JWT Tokenï¼ˆæœ‰æ•ˆæœŸ 7 å¤©ï¼‰
    const token = jwt.sign(
        { id: user.id, phone: user.phone },  // è½½è·
        '666',                                // å¯†é’¥
        { expiresIn: '7d' }                   // è¿‡æœŸæ—¶é—´
    );

    ctx.body = {
        code: 1,
        message: 'ç™»å½•æˆåŠŸ',
        token,
        user: { id: user.id, phone: user.phone }
    };
}
```

**åç«¯ - Token éªŒè¯ä¸­é—´ä»¶**

```javascript
// Utils/jwt.js
function verifyToken() {
    return async (ctx, next) => {
        const token = ctx.request.header.authorization;
        
        if (!token) {
            ctx.status = 416;
            ctx.body = { code: 0, message: 'è¯·å…ˆç™»å½•' };
            return;
        }

        try {
            const decoded = jwt.verify(token, '666');
            if (decoded.id) {
                ctx.userId = decoded.id;  // å°†ç”¨æˆ· ID æ³¨å…¥ä¸Šä¸‹æ–‡
                await next();
            }
        } catch (error) {
            ctx.status = 416;
            ctx.body = { code: 0, message: 'token æ— æ•ˆ' };
        }
    };
}

// åœ¨éœ€è¦è®¤è¯çš„è·¯ç”±ä¸Šä½¿ç”¨
router.post('/chat', verifyToken(), deepseekChat);
```

**å‰ç«¯ - Axios è¯·æ±‚æ‹¦æˆªå™¨è‡ªåŠ¨æºå¸¦ Token**

```javascript
// Http/index.js
import axios from 'axios';
import { Toast } from 'antd-mobile';

// è¯·æ±‚æ‹¦æˆªå™¨ï¼šè‡ªåŠ¨æºå¸¦ Token
axios.interceptors.request.use(request => {
    const token = localStorage.getItem('token');
    if (token) {
        request.headers.Authorization = token;
    }
    return request;
});

// å“åº”æ‹¦æˆªå™¨ï¼šç»Ÿä¸€é”™è¯¯å¤„ç†
axios.interceptors.response.use(
    (response) => {
        if (response.data.code !== 1) {
            Toast.show({ icon: 'fail', content: response.data.message });
            return Promise.reject(response);
        }
        return response;
    },
    (res) => {
        Toast.show({ icon: 'fail', content: res.response.data.message });
        
        // Token è¿‡æœŸï¼Œè·³è½¬ç™»å½•é¡µ
        if (res.status == 416) {
            setTimeout(() => {
                window.location.href = '/login';
            }, 2000);
        }
        return Promise.reject(res);
    }
);
```

---

### 3. AI å›¾åƒè¯†åˆ«æµç¨‹

é‡‡ç”¨ã€Œå‰ç«¯é‡‡é›† â†’ Base64 ç¼–ç  â†’ åç«¯è½¬å‘ â†’ Coze å·¥ä½œæµã€çš„å®Œæ•´é“¾è·¯ï¼š

**å‰ç«¯ - å›¾ç‰‡é‡‡é›†ä¸ç¼–ç **

```javascript
// Components/ImageCaptureAndProcess/Index.jsx
export default function ImageCaptureAndProcess({ onRecognition }) {
    const fileInputRef = useRef(null);
    const videoRef = useRef(null);
    const canvasRef = useRef(null);

    // æ–¹å¼ä¸€ï¼šç›¸å†Œä¸Šä¼ 
    const handleImageUpload = (e) => {
        const file = e.target.files[0];
        if (file) {
            const imageUrl = URL.createObjectURL(file);
            setSelectedImage(imageUrl);
            onRecognition(file);  // å›è°ƒè¯†åˆ«å‡½æ•°
        }
    };

    // æ–¹å¼äºŒï¼šå®æ—¶æ‹ç…§
    const handleCamera = async () => {
        // æ‰“å¼€æ‘„åƒå¤´
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        videoRef.current.srcObject = stream;
        videoRef.current.play();

        // å»¶æ—¶æ‹ç…§
        setTimeout(() => {
            const canvas = canvasRef.current;
            const context = canvas.getContext('2d');
            canvas.width = videoRef.current.videoWidth;
            canvas.height = videoRef.current.videoHeight;
            context.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);
            
            // åœæ­¢æ‘„åƒå¤´
            stream.getTracks().forEach(track => track.stop());
            
            // Canvas è½¬ Blob
            canvas.toBlob(blob => {
                const file = new File([blob], 'captured-image.jpg', { type: 'image/jpeg' });
                onRecognition(file);
            }, 'image/jpeg', 0.8);
        }, 100);
    };
}
```

**å‰ç«¯ - è°ƒç”¨è¯†åˆ«æ¥å£**

```javascript
// Pages/Recognition.jsx
export default function Recognition() {
    const [recognitionResult, setRecognitionResult] = useState(null);

    const realRecognition = async (file) => {
        // File è½¬ Base64
        const dataUrl = await new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = () => resolve(reader.result);
            reader.onerror = (err) => reject(err);
        });

        // æ˜¾ç¤ºåŠ è½½æç¤º
        Toast.show({
            content: 'AIè¯†åˆ«ä¸­...',
            duration: 0,
            icon: 'loading',
            maskClickable: false
        });

        // å‘é€è¯†åˆ«è¯·æ±‚
        const res = await axios.post('/api/coze/recognition', {
            img: dataUrl  // data:image/jpeg;base64,/9j/4AAQ...
        });

        Toast.clear();
        setRecognitionResult(res.data);
    };
}
```

**åç«¯ - è½¬å‘åˆ° Coze å·¥ä½œæµ**

```javascript
// Controllers/cozeController.js
const axios = require('axios');

async function recognition(ctx) {
    const { img } = ctx.request.body;  // æ¥æ”¶ Base64 å›¾ç‰‡

    try {
        // è°ƒç”¨ Coze å·¥ä½œæµ API
        const res = await axios({
            method: 'post',
            url: 'https://z2sjhbyckh.coze.site/run',
            headers: {
                'Authorization': `Bearer ${process.env.VITE_COZE_IMAGE_TO_TEXT_AND_VOICE}`,
                'Content-Type': 'application/json'
            },
            data: { image_base64: img }
        });

        ctx.body = {
            code: 1,
            data: res.data  // è¿”å›è¯†åˆ«ç»“æœ
        };
    } catch (error) {
        ctx.status = 500;
        ctx.body = { code: 0, message: error.message };
    }
}
```

---

### 4. DeepSeek æ™ºèƒ½å¯¹è¯

ä½¿ç”¨ OpenAI SDK å…¼å®¹æ¥å£æ¥å…¥ DeepSeek å¤§æ¨¡å‹ï¼š

```javascript
// Controllers/deepseekController.js
const OpenAI = require('openai');

const openai = new OpenAI({
    baseURL: 'https://api.deepseek.com',
    apiKey: process.env.VITE_DEEPSEEK_API_KEY,
});

async function deepseekChat(ctx) {
    const { message } = ctx.request.body;

    if (!message) {
        ctx.status = 400;
        ctx.body = { code: 0, message: 'æ¶ˆæ¯ä¸èƒ½ä¸ºç©º' };
        return;
    }

    try {
        const completion = await openai.chat.completions.create({
            model: "deepseek-chat",
            messages: [
                { role: "system", content: "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ•™è‚²åŠ©æ‰‹" },
                { role: "user", content: message }
            ],
        });

        ctx.body = {
            code: 1,
            message: completion.choices[0].message.content
        };
    } catch (error) {
        ctx.status = 500;
        ctx.body = { code: 0, message: 'è¯·æ±‚å¤±è´¥' };
    }
}
```

---

### 5. å¯†ç åŠ å¯†å­˜å‚¨

ä½¿ç”¨ bcrypt åº“å®ç°å¯†ç çš„å®‰å…¨å­˜å‚¨ä¸éªŒè¯ï¼š

```javascript
// Controllers/authController.js
const bcrypt = require('bcrypt');
const saltRounds = 10;  // åŠ å¯†å¼ºåº¦

// æ³¨å†Œæ—¶åŠ å¯†å¯†ç 
async function register(ctx) {
    const { password } = ctx.request.body;
    
    // ç”Ÿæˆå¯†ç å“ˆå¸Œï¼ˆè‡ªåŠ¨åŠ ç›ï¼‰
    const hashedPassword = await bcrypt.hash(password, saltRounds);
    
    // å­˜å‚¨åˆ°æ•°æ®åº“
    await createUser({ phone, password_hash: hashedPassword, nickname });
}

// ç™»å½•æ—¶éªŒè¯å¯†ç 
async function login(ctx) {
    const { password } = ctx.request.body;
    const user = await findUserByPhone(phone);
    
    // æ¯”å¯¹å¯†ç 
    const isMatch = await bcrypt.compare(password, user.password_hash);
    if (!isMatch) {
        ctx.status = 400;
        ctx.body = { message: 'å¯†ç é”™è¯¯' };
        return;
    }
}
```

**å®‰å…¨ç‰¹æ€§**ï¼š
- æ¯æ¬¡åŠ å¯†è‡ªåŠ¨ç”Ÿæˆéšæœºç›å€¼
- ç›¸åŒå¯†ç æ¯æ¬¡åŠ å¯†ç»“æœä¸åŒ
- æ— æ³•ä»å“ˆå¸Œå€¼åæ¨åŸå¯†ç 
- saltRounds = 10 çº¦éœ€ 100ms è®¡ç®—ï¼Œå¹³è¡¡å®‰å…¨ä¸æ€§èƒ½

---

### 6. SVG éªŒè¯ç ç”Ÿæˆ

ä½¿ç”¨ svg-captcha åº“ç”Ÿæˆå›¾å½¢éªŒè¯ç ï¼š

```javascript
// Utils/captcha.js
const svgCaptcha = require('svg-captcha');

function generateCaptcha() {
    const captcha = svgCaptcha.create({
        size: 4,           // éªŒè¯ç é•¿åº¦
        noise: 2,          // å¹²æ‰°çº¿æ¡æ•°
        color: true,       // å½©è‰²
        background: '#f0f0f0'  // èƒŒæ™¯è‰²
    });

    return {
        id: Date.now().toString(),  // éªŒè¯ç  ID
        text: captcha.text,          // éªŒè¯ç æ–‡æœ¬
        svg: captcha.data            // SVG å›¾ç‰‡æ•°æ®
    };
}

// æ§åˆ¶å™¨ä¸­ç”ŸæˆéªŒè¯ç 
function getCaptcha(ctx) {
    const captcha = generateCaptcha();
    // å°† captcha.id å’Œ captcha.text å­˜å…¥ç¼“å­˜/æ•°æ®åº“ç”¨äºæ ¡éªŒ
    ctx.body = {
        code: 1,
        captchaId: captcha.id,
        captchaSvg: captcha.svg
    };
}
```

---

### 7. ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿ

ç»„ä»¶çº§ä¸»é¢˜é…ç½®ï¼Œæ”¯æŒçµæ´»æ‰©å±•ï¼š

```javascript
// Components/ImageCaptureAndProcess/Index.jsx
export default function Index({ theme = 'default' }) {
    const themeConfig = {
        default: {
            primary: '#ff7a45',
            secondary: '#f5f5f5',
            loading: '#ff6b6b',
            voice: '#ffd166',
            gradient: ['#fef3e6', '#e6f7ff']
        },
        green: {
            primary: '#4caf50',
            secondary: '#f5f5f5',
            loading: '#4caf50',
            voice: '#4caf50',
            gradient: ['#e8f5e8', '#fff3e0']
        }
    };

    const currentTheme = themeConfig[theme] || themeConfig.default;

    return (
        <div style={{ '--primary': currentTheme.primary }}>
            {/* ç»„ä»¶å†…å®¹ */}
        </div>
    );
}
```

## ğŸ§© å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢

1. åœ¨ `Frontend/src/Pages/` ä¸‹åˆ›å»ºé¡µé¢ç»„ä»¶
2. åœ¨ `Frontend/src/App.jsx` ä¸­æ·»åŠ è·¯ç”±é…ç½®
3. åœ¨ `Frontend/src/Styles/` ä¸‹åˆ›å»ºå¯¹åº”çš„æ ·å¼æ–‡ä»¶

### æ·»åŠ æ–°æ¥å£

1. åœ¨ `Backend/src/Routes/` ä¸‹åˆ›å»ºè·¯ç”±æ–‡ä»¶
2. åœ¨ `Backend/src/Controllers/` ä¸‹åˆ›å»ºæ§åˆ¶å™¨
3. åœ¨ `Backend/src/index.js` ä¸­æ³¨å†Œè·¯ç”±

### æ•°æ®åº“æ“ä½œ

```javascript
// Models/userModel.js
const db = require('../Config/database.js');

class UserModel {
    async findByPhone(phone) {
        const [rows] = await db.execute('SELECT * FROM users WHERE phone = ?', [phone]);
        return rows[0];
    }
}
```

## ğŸ“¦ ä¾èµ–è¯´æ˜

### å‰ç«¯ç”Ÿäº§ä¾èµ–

- `react` & `react-dom`ï¼šUI æ¡†æ¶æ ¸å¿ƒ
- `react-router-dom`ï¼šè·¯ç”±ç®¡ç†
- `antd-mobile`ï¼šç§»åŠ¨ç«¯ç»„ä»¶åº“
- `axios`ï¼šHTTP è¯·æ±‚

### åç«¯ç”Ÿäº§ä¾èµ–

- `koa` & `koa-router`ï¼šWeb æ¡†æ¶
- `mysql2`ï¼šæ•°æ®åº“è¿æ¥
- `jsonwebtoken`ï¼šJWT è®¤è¯
- `bcrypt`ï¼šå¯†ç åŠ å¯†
- `svg-captcha`ï¼šéªŒè¯ç ç”Ÿæˆ
- `@koa/cors`ï¼šè·¨åŸŸå¤„ç†

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/YourFeature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add some YourFeature'`
4. æ¨é€åˆ°åˆ†æ”¯ï¼š`git push origin feature/YourFeature`
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ [LICENSE](https://github.com/harvest0623/Parent-child-education/blob/main/LICENSE) æ–‡ä»¶ã€‚

## ğŸ“ è”ç³»æ–¹å¼

- GitHub Issues: [æäº¤é—®é¢˜](https://github.com/harvest0623/Parent-child-education/issues)
- é‚®ç®±ï¼š<3367741939@qq.com> or <harvest060523@gmail.com>

---

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™ä¸€ä¸ª â­ Starï¼**